(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["data-monitor_wellcome"],{"0719":function(e,t,a){},"0748":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tablePagination"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%",flex:"1"},attrs:{data:e.tableData,border:"",stripe:"",height:"100%","row-key":e.rowKey,"highlight-current-row":"","element-loading-text":e.loadingText,"element-loading-spinner":e.loadingIcon},on:{"selection-change":e.handleSelectionChange,"current-change":e.handleCurrentRow,"expand-change":e.expandRow}},[e.isExpand?a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("expandSet",null,{obj:t})]}}],null,!0)}):e._e(),e._v(" "),e.selectCheck?a("el-table-column",{attrs:{type:"selection",selectable:e.selectable,width:"40"}}):e._e(),e._v(" "),e.showIndex?a("el-table-column",{attrs:{fixed:"",type:"index",prop:"序号",label:"序号",width:"50"}}):e._e(),e._v(" "),e.selectRadio?a("el-table-column",{attrs:{fixed:"",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},nativeOn:{change:function(a){return e.changeRow(t.row)}},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}})]}}],null,!1,955460382)}):e._e(),e._v(" "),e._l(e.colums,(function(t,i){return[t.show?e._e():a("el-table-column",{key:i,attrs:{"show-overflow-tooltip":"",prop:t.prop,label:t.label,width:t.width,align:t.align,"render-header":t.render}}),e._v(" "),"template"===t.show?a("el-table-column",{key:i+t.prop,attrs:{"show-overflow-tooltip":"",prop:t.prop,align:"operate"===t.prop?"center":"left",label:t.label,width:t.width,"render-header":t.render},scopedSlots:e._u([{key:"default",fn:function(a){return[e._t(t.prop,null,{obj:a})]}}],null,!0)}):e._e(),e._v(" "),"operate"===t.show?a("el-table-column",{key:i+t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,"render-header":t.render},scopedSlots:e._u([{key:"default",fn:function(i){return[e._l(t.options,(function(t){return[a("i",{directives:[{name:"show",rawName:"v-show",value:!(t.disable&&t.disable(i.row)),expression:"!(item.disable && item.disable(scope.row))"}],key:t.label,class:[t.icon,"handletable"],on:{click:function(a){return e.handleTable(t.type,i.row)}}},[a("i",{staticClass:"handleTableText"},[e._v(e._s(t.label))])])]}))]}}],null,!0)}):e._e()]}))],2),e._v(" "),e.isShowPagination?a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageInfo.currentPage,"page-sizes":e.pageInfo.pageSizes,"page-size":e.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.pageInfo,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"currentPage",t)}}})],1):e._e()],1)},n=[],o=(a("20d6"),a("c5f6"),{name:"Table",props:{tableData:{type:Array,default:function(){return[]}},colums:{type:Array,default:function(){return[]}},isOpreate:{type:Boolean,default:!1},isExpand:{type:Boolean,default:!1},expandData:{type:Array,default:function(){return[]}},setExpand:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"加载中"},loadingIcon:{type:String,default:"el-icon-loading"},selectCheck:{type:Boolean,default:!1},selectRadio:{type:Boolean,default:!1},pageInfo:{type:Object,default:function(){return{currentPage:1,pageSize:10,pageSizes:[10,20,50,100]}}},total:{type:Number,default:0},rowKey:{type:String,default:""},isShowPagination:{type:Boolean,default:!0},height:{type:String,default:""},showIndex:{type:Boolean,default:!1},selectable:{type:Function,default:function(){return 1}}},data:function(){return{radioValue:""}},methods:{handleTable:function(e,t){this.$emit("handleTable",{type:e,row:t})},handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)},handleSelectionChange:function(e){this.$emit("handleSelectionChange",e)},handleCurrentRow:function(e,t){var a=this;e&&(this.$emit("handleRadioChange",e),this.radioValue=this.tableData.findIndex((function(t){return t[a.colums[0].prop]===e[a.colums[0].prop]})))},expandRow:function(e,t){this.$emit("handleRowExpandChange",e,t)},toggleRowExpansion:function(e,t){this.$refs.table.toggleRowExpansion(e,t)},changeRow:function(e){e&&this.$emit("handleRadioChange",e)}},watch:{tableData:function(e){this.radioValue=""}}}),l=o,c=(a("d143"),a("2877")),s=Object(c["a"])(l,i,n,!1,null,null,null);t["a"]=s.exports},"08ca":function(e,t,a){},"0c1d":function(e,t,a){},1419:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.show?i("div",{staticClass:"no-data-box",style:{transform:"translate("+e.left+", -50%)"}},[i("img",{staticClass:"no-data-pic",attrs:{src:a("c36d")}}),e._v(" "),i("p",{staticClass:"no-data-text"},[e._v("\n    "+e._s(e.text)+"\n    "),i("span",{staticClass:"no-data-link",on:{click:e.clickHandle}},[e._v(e._s(e.textL))])])]):e._e()},n=[],o={name:"no-data",props:{show:{type:Boolean,default:!1},text:{type:String,default:"暂无数据"},textL:{type:String,default:""},left:{type:String,default:"-50%"}},data:function(){return{}},methods:{clickHandle:function(){this.$emit("clickHandle")}}},l=o,c=(a("2d6d"),a("2877")),s=Object(c["a"])(l,i,n,!1,null,"dc6c4704",null);t["a"]=s.exports},1481:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user main-container"},[a("router-view")],1)},n=[],o={name:"user",data:function(){return{}}},l=o,c=a("2877"),s=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=s.exports},"15e1":function(e,t,a){},"1a3f":function(e,t,a){},"1ea9":function(e,t,a){"use strict";var i=a("c49a"),n=a.n(i);n.a},"205a":function(e,t,a){"use strict";var i=a("2a87"),n=a.n(i);n.a},"27ef":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collect-list"},[a("div",{staticClass:"collect-list-serach"},[a("div",{staticClass:"search-left"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createDataSource}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.checkRadioData.id},on:{click:e.deleteList}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"search-right"},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"请输入人员名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.taskName,callback:function(t){e.taskName=t},expression:"taskName"}},[a("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.searchData},slot:"suffix"})])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"collect-list-content"},[a("Table",{ref:"collectlist",attrs:{tableData:e.collectList,selectRadio:!0,selectCheck:!1,colums:e.colums,isShowPagination:!1,total:e.total},on:{handleTable:e.handleTable,handleRadioChange:e.handleRadioChange},scopedSlots:e._u([{key:"dbName",fn:function(t){return[a("a",{staticStyle:{cursor:"pointer",color:"#3BA3F8"},on:{click:function(a){return e.showDatasource(t.obj.row)}}},[e._v(e._s(t.obj.row.dbName))])]}}])})],1),e._v(" "),e.collectList.length?a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.pageInfo.currentPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("Dialog",{attrs:{title:e.dialog1.title,dialogVisible:e.dialog1.visible,width:e.dialog1.width,isBtn:!1,handleClose:e.handleClose1},on:{openDialog:e.openDialog1}})],1)},n=[],o=(a("a481"),a("db72")),l=a("1419"),c=a("3f7a"),s=a("0748"),r={name:"collect-list",components:{NoData:l["a"],Dialog:c["a"],Table:s["a"]},data:function(){return{checkRadioData:{},colums:[{prop:"UUID",label:"人员ID"},{prop:"username",label:"开发者/业主"},{prop:"account",label:"账号"},{prop:"password",label:"密码"},{prop:"orgName",label:"所属机构"}],operateOptions:[{label:"新增",type:"add"},{label:"删除",type:"del"}],loading:!1,dataSourceType:"",taskName:"",collectList:[],pageInfo:{currentPage:1,pageSize:12},total:0,dialog:{visible:!1,title:"",data:{}},dialog1:{visible:!1,title:"数据源详情",width:"50rem",data:{}}}},mounted:function(){this.searchData()},methods:{handleTable:function(e){var t=e.type,a=e.row;switch(t){case"execute":this.executeDataSource(a);break;case"edit":this.editColect(a);break;case"show":this.showDatasource(a);break}},handleTableCell:function(e){var t=e.a,a=e.b,i=e.c,n=e.d;console.log(11,t,a,i,n)},handleRadioChange:function(e){this.checkRadioData=e},executeDataSource:function(e){var t=this;this.$common.confirmMessage(this,"是否确认此操作",(function(){t.$http("metavalidateexec").get({ids:t.checkRadioData.id}).then((function(e){!0===e.data?t.$http("metaexec").get({collectId:t.checkRadioData.id}).then((function(e){t.$common.alertMessage(t,"success","执行成功",(function(){t.searchData()}))})):t.$common.alertMessage(t,"error","该数据源有其他采集任务正在执行！",(function(){}))}))}))},createDataSource:function(e){this.dialog={visible:!0,title:"新建采集任务",data:null}},getCollectData:function(){this.collectList=[{UUID:"U-001",username:"李四",account:"lisi",password:"*****",orgName:"检测部"},{UUID:"U-001",username:"王武",account:"wangwu",password:"*****",orgName:"研发部"}]},searchData:function(){this.pageInfo.currentPage=1,this.getCollectData()},editColect:function(e){this.dialog={visible:!0,title:"编辑采集任务",data:e}},deleteList:function(){var e=this;this.$common.confirmMessage(this,"是否确认删除操作",(function(){e.$http("metadelete").post({ids:e.checkRadioData.id}).then((function(t){e.$common.alertMessage(e,"success","删除成功",(function(){e.searchData()}))}))}),(function(){}))},validateDatasource:function(){return this.$http("metavalidatedelete").get({id:this.checkRadioData.id})},handleCurrentChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageInfo.currentPage=e,this.getCollectData()},editCallback:function(e){var t=this;if(e){var a=Object(o["a"])({},e.id?{id:e.id}:{},{taskName:e.taskName,datasourceId:e.datasourceId,collectType:e.collectType}),i=Object(o["a"])({},e.cid?{id:e.cid}:{},{type:"3"});if("0"===e.collectType){if(i.collectType=e.collectType,i.rule=3,i.exeDate=JSON.stringify({minute:"0,10,20,30,40,50"}),i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}))}else if("1"===e.collectType)if("0"===e.cycleType)i.rule=4,i.exeDate=JSON.stringify({dateTime:this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime)});else if("1"===e.cycleType){if(i.rule=e.jobCron,i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}));switch(i.rule){case 0:i.exeDate=JSON.stringify(e.type0);break;case 1:i.exeDate=JSON.stringify(e.type1);break;case 2:i.exeDate=JSON.stringify(e.type2);break;case 3:i.exeDate=JSON.stringify(e.type3);break}}var n={meatadataCollectStr:JSON.stringify(a),dispatchStr:JSON.stringify(i)};this.$http("metasave").post(Object(o["a"])({},n)).then((function(e){t.$common.alertMessage(t,"success","保存成功！",(function(){})),t.searchData(),t.$refs.editCollect.resetData(),t.dialog={visible:!1,title:"",data:{}}}))}else this.$refs.editCollect.resetData(),this.dialog={visible:!1,title:"",data:{}}},pausePlay:function(e){var t=this;this.$common.confirmMessage(this,(function(){var a=1===e.status?"开始成功！":"暂停成功！",i=1===e.status?"collectPlay":"collectPause";t.$http.metaDataManage[i]({id:e.dispatchId}).then((function(e){t.$common.alertMessage(t,"success",a,(function(){t.searchData()}))}))}),(function(){}))},showDatasource:function(e){this.dialog1.visible=!0,this.dialog1.data=e},handleClose1:function(){this.dialog1.visible=!1,this.dialog1.data={}},openDialog1:function(){var e=this;this.$nextTick((function(){e.$refs.viewDatasource.init(e.dialog1.data)}))}}},d=r,u=(a("ce1d"),a("2877")),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},"2a87":function(e,t,a){},"2d6d":function(e,t,a){"use strict";var i=a("ff7f"),n=a.n(i);n.a},"33a8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-maintain"},[e._v("\n  "+e._s(this.$route.meta.title)+"\n")])},n=[],o={name:"data-maintain",data:function(){return{}}},l=o,c=(a("c96e"),a("2877")),s=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=s.exports},"33fd":function(e,t,a){"use strict";var i=a("60a6"),n=a.n(i);n.a},3915:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collect-list"},[a("div",{staticClass:"collect-list-serach"},[a("div",{staticClass:"search-left"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createDataSource}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.checkRadioData.id},on:{click:e.deleteList}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"search-right"},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"请输入机构管辖名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.taskName,callback:function(t){e.taskName=t},expression:"taskName"}},[a("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.searchData},slot:"suffix"})])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"collect-list-content"},[a("Table",{ref:"collectlist",attrs:{tableData:e.collectList,selectRadio:!0,selectCheck:!1,colums:e.colums,isShowPagination:!1,total:e.total},on:{handleTable:e.handleTable,handleRadioChange:e.handleRadioChange},scopedSlots:e._u([{key:"dbName",fn:function(t){return[a("a",{staticStyle:{cursor:"pointer",color:"#3BA3F8"},on:{click:function(a){return e.showDatasource(t.obj.row)}}},[e._v(e._s(t.obj.row.dbName))])]}}])})],1),e._v(" "),e.collectList.length?a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.pageInfo.currentPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("Dialog",{attrs:{title:e.dialog1.title,dialogVisible:e.dialog1.visible,width:e.dialog1.width,isBtn:!1,handleClose:e.handleClose1},on:{openDialog:e.openDialog1}})],1)},n=[],o=(a("a481"),a("db72")),l=a("1419"),c=a("3f7a"),s=a("0748"),r={name:"collect-list",components:{NoData:l["a"],Dialog:c["a"],Table:s["a"]},data:function(){return{checkRadioData:{},colums:[{prop:"UUID",label:"机构ID"},{prop:"orgId",label:"机构ID"},{prop:"lineId",label:"线路ID"},{prop:"train",label:"车站/车辆"},{prop:"stationId",label:"车站ID"},{prop:"devTypeId",label:"设备类型ID"}],operateOptions:[{label:"新增",type:"add"},{label:"删除",type:"del"}],loading:!1,dataSourceType:"",taskName:"",collectList:[],pageInfo:{currentPage:1,pageSize:12},total:0,dialog:{visible:!1,title:"",data:{}},dialog1:{visible:!1,title:"数据源详情",width:"50rem",data:{}}}},mounted:function(){this.searchData()},methods:{handleTable:function(e){var t=e.type,a=e.row;switch(t){case"execute":this.executeDataSource(a);break;case"edit":this.editColect(a);break;case"show":this.showDatasource(a);break}},handleTableCell:function(e){var t=e.a,a=e.b,i=e.c,n=e.d;console.log(11,t,a,i,n)},handleRadioChange:function(e){this.checkRadioData=e},executeDataSource:function(e){var t=this;this.$common.confirmMessage(this,"是否确认此操作",(function(){t.$http("metavalidateexec").get({ids:t.checkRadioData.id}).then((function(e){!0===e.data?t.$http("metaexec").get({collectId:t.checkRadioData.id}).then((function(e){t.$common.alertMessage(t,"success","执行成功",(function(){t.searchData()}))})):t.$common.alertMessage(t,"error","该数据源有其他采集任务正在执行！",(function(){}))}))}))},createDataSource:function(e){this.dialog={visible:!0,title:"新建采集任务",data:null}},getCollectData:function(){this.collectList=[{UUID:"GX-001",orgId:"JG-001",lineId:"line-2",train:"复兴号FX-001",stationId:"s-2",devTypeId:"dev-2"},{UUID:"GX-002",orgId:"JG-002",lineId:"line-1",train:"复兴号FX-002",stationId:"s-1",devTypeId:"dev-1"}]},searchData:function(){this.pageInfo.currentPage=1,this.getCollectData()},editColect:function(e){this.dialog={visible:!0,title:"编辑采集任务",data:e}},deleteList:function(){var e=this;this.$common.confirmMessage(this,"是否确认删除操作",(function(){e.$http("metadelete").post({ids:e.checkRadioData.id}).then((function(t){e.$common.alertMessage(e,"success","删除成功",(function(){e.searchData()}))}))}),(function(){}))},validateDatasource:function(){return this.$http("metavalidatedelete").get({id:this.checkRadioData.id})},handleCurrentChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageInfo.currentPage=e,this.getCollectData()},editCallback:function(e){var t=this;if(e){var a=Object(o["a"])({},e.id?{id:e.id}:{},{taskName:e.taskName,datasourceId:e.datasourceId,collectType:e.collectType}),i=Object(o["a"])({},e.cid?{id:e.cid}:{},{type:"3"});if("0"===e.collectType){if(i.collectType=e.collectType,i.rule=3,i.exeDate=JSON.stringify({minute:"0,10,20,30,40,50"}),i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}))}else if("1"===e.collectType)if("0"===e.cycleType)i.rule=4,i.exeDate=JSON.stringify({dateTime:this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime)});else if("1"===e.cycleType){if(i.rule=e.jobCron,i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}));switch(i.rule){case 0:i.exeDate=JSON.stringify(e.type0);break;case 1:i.exeDate=JSON.stringify(e.type1);break;case 2:i.exeDate=JSON.stringify(e.type2);break;case 3:i.exeDate=JSON.stringify(e.type3);break}}var n={meatadataCollectStr:JSON.stringify(a),dispatchStr:JSON.stringify(i)};this.$http("metasave").post(Object(o["a"])({},n)).then((function(e){t.$common.alertMessage(t,"success","保存成功！",(function(){})),t.searchData(),t.$refs.editCollect.resetData(),t.dialog={visible:!1,title:"",data:{}}}))}else this.$refs.editCollect.resetData(),this.dialog={visible:!1,title:"",data:{}}},pausePlay:function(e){var t=this;this.$common.confirmMessage(this,(function(){var a=1===e.status?"开始成功！":"暂停成功！",i=1===e.status?"collectPlay":"collectPause";t.$http.metaDataManage[i]({id:e.dispatchId}).then((function(e){t.$common.alertMessage(t,"success",a,(function(){t.searchData()}))}))}),(function(){}))},showDatasource:function(e){this.dialog1.visible=!0,this.dialog1.data=e},handleClose1:function(){this.dialog1.visible=!1,this.dialog1.data={}},openDialog1:function(){var e=this;this.$nextTick((function(){e.$refs.viewDatasource.init(e.dialog1.data)}))}}},d=r,u=(a("4a54"),a("2877")),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},"395b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-maintain"},[e._v("\n  "+e._s(this.$route.meta.title)+"\n")])},n=[],o={name:"data-maintain",data:function(){return{}}},l=o,c=(a("4a5e"),a("2877")),s=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=s.exports},"3a78":function(e,t,a){"use strict";var i=a("7a56a"),n=a.n(i);n.a},"3f7a":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog"},[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.title,visible:e.dialogVisible,width:e.width,center:e.center,fullscreen:e.fullscreen,"before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":e.innerVisible},on:{"update:visible":function(t){e.dialogVisible=t},open:e.openDialog}},[e._t("default"),e._v(" "),e.isBtn?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.customFooter?e._l(e.customOptions,(function(t,i){return a("el-button",{key:i,attrs:{size:"mini",disabled:t.disabled,plain:!!t.plain,type:t.type||"primary"},on:{click:function(e){t.handleClick&&t.handleClick()}}},[e._v(e._s(t.label))])})):[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.confirmDialog()}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){return e.cancelDialog()}}},[e._v("取 消")])]],2):e._e()],2)],1)},n=[],o={name:"Dialog",props:{title:{type:String,default:"提示"},dialogVisible:{type:Boolean,default:!1},center:{type:Boolean,default:!1},innerVisible:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},handleClose:{type:Function,default:function(){return console.log("关闭前的回调函数")}},width:{type:String,default:"600px"},isBtn:{type:Boolean,default:!0},customFooter:{type:Boolean,default:!1},customOptions:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{confirmDialog:function(){this.$emit("confirmDialog")},cancelDialog:function(){this.$emit("cancelDialog")},openDialog:function(){this.$emit("openDialog")}}},l=o,c=(a("33fd"),a("2877")),s=Object(c["a"])(l,i,n,!1,null,null,null);t["a"]=s.exports},"46e9":function(e,t,a){},"4a54":function(e,t,a){"use strict";var i=a("0719"),n=a.n(i);n.a},"4a5e":function(e,t,a){"use strict";var i=a("9783"),n=a.n(i);n.a},5374:function(e,t,a){"use strict";var i=a("15e1"),n=a.n(i);n.a},5688:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collect-list"},[a("div",{staticClass:"collect-list-serach"},[a("div",{staticClass:"search-left"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createDataSource}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.checkRadioData.id},on:{click:e.deleteList}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"search-right"},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"请输入状态量名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.taskName,callback:function(t){e.taskName=t},expression:"taskName"}},[a("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.searchData},slot:"suffix"})])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"collect-list-content"},[a("Table",{ref:"collectlist",attrs:{tableData:e.collectList,selectRadio:!0,selectCheck:!1,colums:e.colums,isShowPagination:!1,total:e.total},on:{handleTable:e.handleTable,handleRadioChange:e.handleRadioChange},scopedSlots:e._u([{key:"dbName",fn:function(t){return[a("a",{staticStyle:{cursor:"pointer",color:"#3BA3F8"},on:{click:function(a){return e.showDatasource(t.obj.row)}}},[e._v(e._s(t.obj.row.dbName))])]}}])})],1),e._v(" "),e.collectList.length?a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.pageInfo.currentPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("Dialog",{attrs:{title:e.dialog1.title,dialogVisible:e.dialog1.visible,width:e.dialog1.width,isBtn:!1,handleClose:e.handleClose1},on:{openDialog:e.openDialog1}})],1)},n=[],o=(a("a481"),a("db72")),l=a("1419"),c=a("3f7a"),s=a("0748"),r={name:"collect-list",components:{NoData:l["a"],Dialog:c["a"],Table:s["a"]},data:function(){return{checkRadioData:{},colums:[{prop:"UUID",label:"ID"},{prop:"itemName",label:"属性名称"},{prop:"devTypeName",label:"所属设备类型"}],operateOptions:[{label:"新增",type:"add"},{label:"删除",type:"del"}],loading:!1,dataSourceType:"",taskName:"",collectList:[],pageInfo:{currentPage:1,pageSize:12},total:0,dialog:{visible:!1,title:"",data:{}},dialog1:{visible:!1,title:"数据源详情",width:"50rem",data:{}}}},mounted:function(){this.searchData()},methods:{handleTable:function(e){var t=e.type,a=e.row;switch(t){case"execute":this.executeDataSource(a);break;case"edit":this.editColect(a);break;case"show":this.showDatasource(a);break}},handleTableCell:function(e){var t=e.a,a=e.b,i=e.c,n=e.d;console.log(11,t,a,i,n)},handleRadioChange:function(e){this.checkRadioData=e},executeDataSource:function(e){var t=this;this.$common.confirmMessage(this,"是否确认此操作",(function(){t.$http("metavalidateexec").get({ids:t.checkRadioData.id}).then((function(e){!0===e.data?t.$http("metaexec").get({collectId:t.checkRadioData.id}).then((function(e){t.$common.alertMessage(t,"success","执行成功",(function(){t.searchData()}))})):t.$common.alertMessage(t,"error","该数据源有其他采集任务正在执行！",(function(){}))}))}))},createDataSource:function(e){this.dialog={visible:!0,title:"新建采集任务",data:null}},getCollectData:function(){this.collectList=[{UUID:"SX-001",itemName:"生产厂家",devTypeName:"类型1"},{UUID:"SX-002",itemName:"生产厂家",devTypeName:"类型2"}]},searchData:function(){this.pageInfo.currentPage=1,this.getCollectData()},editColect:function(e){this.dialog={visible:!0,title:"编辑采集任务",data:e}},deleteList:function(){var e=this;this.$common.confirmMessage(this,"是否确认删除操作",(function(){e.$http("metadelete").post({ids:e.checkRadioData.id}).then((function(t){e.$common.alertMessage(e,"success","删除成功",(function(){e.searchData()}))}))}),(function(){}))},validateDatasource:function(){return this.$http("metavalidatedelete").get({id:this.checkRadioData.id})},handleCurrentChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageInfo.currentPage=e,this.getCollectData()},editCallback:function(e){var t=this;if(e){var a=Object(o["a"])({},e.id?{id:e.id}:{},{taskName:e.taskName,datasourceId:e.datasourceId,collectType:e.collectType}),i=Object(o["a"])({},e.cid?{id:e.cid}:{},{type:"3"});if("0"===e.collectType){if(i.collectType=e.collectType,i.rule=3,i.exeDate=JSON.stringify({minute:"0,10,20,30,40,50"}),i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}))}else if("1"===e.collectType)if("0"===e.cycleType)i.rule=4,i.exeDate=JSON.stringify({dateTime:this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime)});else if("1"===e.cycleType){if(i.rule=e.jobCron,i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}));switch(i.rule){case 0:i.exeDate=JSON.stringify(e.type0);break;case 1:i.exeDate=JSON.stringify(e.type1);break;case 2:i.exeDate=JSON.stringify(e.type2);break;case 3:i.exeDate=JSON.stringify(e.type3);break}}var n={meatadataCollectStr:JSON.stringify(a),dispatchStr:JSON.stringify(i)};this.$http("metasave").post(Object(o["a"])({},n)).then((function(e){t.$common.alertMessage(t,"success","保存成功！",(function(){})),t.searchData(),t.$refs.editCollect.resetData(),t.dialog={visible:!1,title:"",data:{}}}))}else this.$refs.editCollect.resetData(),this.dialog={visible:!1,title:"",data:{}}},pausePlay:function(e){var t=this;this.$common.confirmMessage(this,(function(){var a=1===e.status?"开始成功！":"暂停成功！",i=1===e.status?"collectPlay":"collectPause";t.$http.metaDataManage[i]({id:e.dispatchId}).then((function(e){t.$common.alertMessage(t,"success",a,(function(){t.searchData()}))}))}),(function(){}))},showDatasource:function(e){this.dialog1.visible=!0,this.dialog1.data=e},handleClose1:function(){this.dialog1.visible=!1,this.dialog1.data={}},openDialog1:function(){var e=this;this.$nextTick((function(){e.$refs.viewDatasource.init(e.dialog1.data)}))}}},d=r,u=(a("7a1b"),a("2877")),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},"581c":function(e,t,a){"use strict";var i=a("f5ca"),n=a.n(i);n.a},"5cca":function(e,t,a){},"5cd5":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collect-list"},[a("div",{staticClass:"collect-list-serach"},[a("div",{staticClass:"search-left"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createDataSource}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.checkRadioData.id},on:{click:e.deleteList}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"search-right"},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"请输入人员权限名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.taskName,callback:function(t){e.taskName=t},expression:"taskName"}},[a("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.searchData},slot:"suffix"})])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"collect-list-content"},[a("Table",{ref:"collectlist",attrs:{tableData:e.collectList,selectRadio:!0,selectCheck:!1,colums:e.colums,isShowPagination:!1,total:e.total},on:{handleTable:e.handleTable,handleRadioChange:e.handleRadioChange},scopedSlots:e._u([{key:"dbName",fn:function(t){return[a("a",{staticStyle:{cursor:"pointer",color:"#3BA3F8"},on:{click:function(a){return e.showDatasource(t.obj.row)}}},[e._v(e._s(t.obj.row.dbName))])]}}])})],1),e._v(" "),e.collectList.length?a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.pageInfo.currentPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("Dialog",{attrs:{title:e.dialog1.title,dialogVisible:e.dialog1.visible,width:e.dialog1.width,isBtn:!1,handleClose:e.handleClose1},on:{openDialog:e.openDialog1}})],1)},n=[],o=(a("a481"),a("db72")),l=a("1419"),c=a("3f7a"),s=a("0748"),r={name:"collect-list",components:{NoData:l["a"],Dialog:c["a"],Table:s["a"]},data:function(){return{checkRadioData:{},colums:[{prop:"UUID",label:"权限ID"},{prop:"username",label:"采集项名称"},{prop:"role",label:"权限项"}],operateOptions:[{label:"新增",type:"add"},{label:"删除",type:"del"}],loading:!1,dataSourceType:"",taskName:"",collectList:[],pageInfo:{currentPage:1,pageSize:12},total:0,dialog:{visible:!1,title:"",data:{}},dialog1:{visible:!1,title:"数据源详情",width:"50rem",data:{}}}},mounted:function(){this.searchData()},methods:{handleTable:function(e){var t=e.type,a=e.row;switch(t){case"execute":this.executeDataSource(a);break;case"edit":this.editColect(a);break;case"show":this.showDatasource(a);break}},handleTableCell:function(e){var t=e.a,a=e.b,i=e.c,n=e.d;console.log(11,t,a,i,n)},handleRadioChange:function(e){this.checkRadioData=e},executeDataSource:function(e){var t=this;this.$common.confirmMessage(this,"是否确认此操作",(function(){t.$http("metavalidateexec").get({ids:t.checkRadioData.id}).then((function(e){!0===e.data?t.$http("metaexec").get({collectId:t.checkRadioData.id}).then((function(e){t.$common.alertMessage(t,"success","执行成功",(function(){t.searchData()}))})):t.$common.alertMessage(t,"error","该数据源有其他采集任务正在执行！",(function(){}))}))}))},createDataSource:function(e){this.dialog={visible:!0,title:"新建采集任务",data:null}},getCollectData:function(){this.collectList=[{UUID:"MN-001",username:"李四",role:"增删改"},{UUID:"MN-002",username:"王武",role:"增删改"}]},searchData:function(){this.pageInfo.currentPage=1,this.getCollectData()},editColect:function(e){this.dialog={visible:!0,title:"编辑采集任务",data:e}},deleteList:function(){var e=this;this.$common.confirmMessage(this,"是否确认删除操作",(function(){e.$http("metadelete").post({ids:e.checkRadioData.id}).then((function(t){e.$common.alertMessage(e,"success","删除成功",(function(){e.searchData()}))}))}),(function(){}))},validateDatasource:function(){return this.$http("metavalidatedelete").get({id:this.checkRadioData.id})},handleCurrentChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageInfo.currentPage=e,this.getCollectData()},editCallback:function(e){var t=this;if(e){var a=Object(o["a"])({},e.id?{id:e.id}:{},{taskName:e.taskName,datasourceId:e.datasourceId,collectType:e.collectType}),i=Object(o["a"])({},e.cid?{id:e.cid}:{},{type:"3"});if("0"===e.collectType){if(i.collectType=e.collectType,i.rule=3,i.exeDate=JSON.stringify({minute:"0,10,20,30,40,50"}),i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}))}else if("1"===e.collectType)if("0"===e.cycleType)i.rule=4,i.exeDate=JSON.stringify({dateTime:this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime)});else if("1"===e.cycleType){if(i.rule=e.jobCron,i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}));switch(i.rule){case 0:i.exeDate=JSON.stringify(e.type0);break;case 1:i.exeDate=JSON.stringify(e.type1);break;case 2:i.exeDate=JSON.stringify(e.type2);break;case 3:i.exeDate=JSON.stringify(e.type3);break}}var n={meatadataCollectStr:JSON.stringify(a),dispatchStr:JSON.stringify(i)};this.$http("metasave").post(Object(o["a"])({},n)).then((function(e){t.$common.alertMessage(t,"success","保存成功！",(function(){})),t.searchData(),t.$refs.editCollect.resetData(),t.dialog={visible:!1,title:"",data:{}}}))}else this.$refs.editCollect.resetData(),this.dialog={visible:!1,title:"",data:{}}},pausePlay:function(e){var t=this;this.$common.confirmMessage(this,(function(){var a=1===e.status?"开始成功！":"暂停成功！",i=1===e.status?"collectPlay":"collectPause";t.$http.metaDataManage[i]({id:e.dispatchId}).then((function(e){t.$common.alertMessage(t,"success",a,(function(){t.searchData()}))}))}),(function(){}))},showDatasource:function(e){this.dialog1.visible=!0,this.dialog1.data=e},handleClose1:function(){this.dialog1.visible=!1,this.dialog1.data={}},openDialog1:function(){var e=this;this.$nextTick((function(){e.$refs.viewDatasource.init(e.dialog1.data)}))}}},d=r,u=(a("74f4"),a("2877")),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},"60a6":function(e,t,a){},"69e1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"service-config"},[a("div",{staticClass:"config-tree"},[a("p",{staticClass:"info-title"},[a("span",{staticClass:"icon"},[a("svg-icon",{attrs:{iconClass:"wallet"}})],1),e._v(" "),a("span",{staticClass:"msg"},[e._v("轨道交通接入组件库")])]),e._v(" "),a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"查询..."},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),a("el-tree",{key:e.treeKey,ref:"treeData",staticClass:"treeData",attrs:{data:e.treeData,props:e.defaultProps,"highlight-current":"","node-key":"id","default-expanded-keys":e.treeExpandedKeys,"expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.handleClick,"node-expand":e.treeExpand,"node-collapse":e.treeCollapse}})],1),e._v(" "),a("div",{staticClass:"config-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}],staticClass:"verify-operate mb10 mt10"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addComponent}},[e._v("导入组件")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.delComponent}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"content-inner"},[a(e.activePart,{ref:"activePart",tag:"component"})],1)]),e._v(" "),a("ImportComponentDialog",{ref:"ImportComponent",attrs:{dialog:e.importComponentDialog},on:{cancelCb:e.cancelCb}})],1)},n=[],o=(a("7f7f"),a("ac6a"),a("96cf"),a("3b8d")),l=a("bd86"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"workspace"},[a("Table",{attrs:{tableData:e.tableData,colums:e.colums,selectCheck:!0,pageInfo:e.pageInfo,total:e.total},on:{handleTable:e.handleTable,handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange,handleSelectionChange:e.handleSelectionChange}})],1)},s=[],r=a("0748"),d={name:"workspace",components:{Table:r["a"]},data:function(){return{colums:[{prop:"name",label:"组件名称"},{prop:"describe",label:"描述"},{prop:"createTime",label:"更新时间"},{prop:"operate",label:"操作",width:"250px",show:"operate",options:[{label:"查看",icon:"",type:"show"},{label:"编辑",icon:"",type:"edit"},{label:"删除",icon:"",type:"delete"}]}],tableData:[{id:1,name:"我的组件",createTime:"2020-5-20 11:12",describe:"组件组件"},{id:1,name:"我的组件",createTime:"2020-5-20 11:12",describe:"组件组件"},{id:1,name:"我的组件",createTime:"2020-5-20 11:12",describe:"组件组件"},{id:1,name:"我的组件",createTime:"2020-5-20 11:12",describe:"组件组件"},{id:1,name:"我的组件",createTime:"2020-5-20 11:12",describe:"组件组件"}],pageInfo:{currentPage:1,pageSize:10,pageSizes:[10,20,50,100]},total:0,checkData:[]}},methods:{handleTable:function(e){e.type,e.row},handleSizeChange:function(e){this.pageInfo.pageSize=e,this.pageInfo.currentPage=1},handleCurrentChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageInfo.currentPage=e},handleSelectionChange:function(e){this.checkData=e}}},u=d,h=(a("1ea9"),a("2877")),f=Object(h["a"])(u,c,s,!1,null,null,null),m=f.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Dialog",{attrs:{title:"导入组件",width:"50rem",dialogVisible:e.dialog.visible,handleClose:e.cancelDialog},on:{confirmDialog:e.cancelDialog,cancelDialog:e.cancelDialog}},[a("div",{staticClass:"check-guide"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"组件名称"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"组件描述"}},[a("el-input",{model:{value:e.form.describe,callback:function(t){e.$set(e.form,"describe",t)},expression:"form.describe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择导入组件"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:"",accept:".jar",limit:3,"on-exceed":e.handleExceed,"file-list":e.form.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jar文件")])],1)],1)],1)],1)])},p=[],y=a("3f7a"),D={name:"ImportComponentDialog",props:{dialog:{type:Object,default:function(){return{}}}},components:{Dialog:y["a"]},data:function(){return{form:{name:"",describe:"",fileList:[]}}},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},onSubmit:function(){console.log("submit!")},cancelDialog:function(){this.$emit("cancelCb"),this.reset()},reset:function(){this.form={name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}}}},b=D,v=(a("3a78"),Object(h["a"])(b,g,p,!1,null,null,null)),C=v.exports,k={name:"service-config",components:{TableInfo:m,ImportComponentDialog:C},data:function(){var e;return e={showTable:!1,searchValue:"",treeKey:(new Date).getTime(),treeExpandedKeys:[],defaultProps:{label:"label",children:"children",isLeaf:"leaf"},currentNode:{},breadcrumbList:[],activePart:"",treeData:[{label:"通用ETL接入组件",children:[{label:"MySql"},{label:"Ftp"}]},{label:"信号专业",children:[{label:"道岔转辙机",children:[{label:"采集分机"}]},{label:"电源",children:[{label:"鼎汉电源"}]},{label:"CBTC-U888",children:[{label:"连锁"},{label:"车载"}]}]},{label:"通信专业",children:[{label:"高速数据网"}]},{label:"车辆",children:[{label:"TCMS"}]},{label:"机电",children:[{label:"综合监控"}]},{label:"供电"},{label:"工务"}]},Object(l["a"])(e,"defaultProps",{children:"children",label:"label"}),Object(l["a"])(e,"importComponentDialog",{visible:!1,data:{}}),e},mounted:function(){},methods:{addComponent:function(){this.importComponentDialog={visible:!0,data:{}}},delComponent:function(){var e=this;this.$confirm("是否删除选中组件?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$message({type:"success",message:"删除成功!"})})).catch((function(){}))},cancelCb:function(){this.importComponentDialog={visible:!1,data:{}}},loadNodeTree:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,a){var i,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={pid:t.data?t.data.id:-1},e.next=3,this.$http("meta_addTreelist").post(i,!0,".config-tree").then((function(e){e.data.forEach((function(e){e.label=e.name,e.children=[],0===t.level?(e.type="database",e.leaf=!1):(e.type="table",e.leaf=!0)})),a(e.data)})).catch((function(){a([])}));case 3:0===t.level&&this.$nextTick((function(){if(t.childNodes.length){var e=t.childNodes[0].data;n.$refs.treeData&&n.$refs.treeData.setCurrentKey(e.id),n.handleClick(e,t.childNodes[0])}}));case 4:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},renderContent:function(e,t){var a=t.node,i=t.data;t.store;return e("span",{class:"nodeItem",attrs:{title:a.label}},[e("span",{class:"node-label node-label-nowrap"},[e("span",{class:"node-icon",directives:[{name:"show",value:"database"===i.type}]},[e("svg-icon",{attrs:{iconClass:"database"}})]),e("span",{class:"node-icon",directives:[{name:"show",value:"table"===i.type}]},[e("svg-icon",{attrs:{iconClass:"tables"}})]),a.label])])},handleClick:function(e,t){var a=this;this.currentNode=e,this.breadcrumbList=this.getBreadcrumbList(t),this.activePart=m,this.showTable=!0,this.$nextTick((function(t){a.$refs.activePart.init(e)}))},treeExpand:function(e,t,a){this.treeExpandedKeys.push(t.id)},treeCollapse:function(e,t,a){var i=this,n=this.treeExpandedKeys.indexOf(t.id);n>-1&&this.treeExpandedKeys.splice(n,1);var o=function(e){var t=[],a=function e(a){a.forEach((function(a){a.expanded&&t.push(a.node.id),a.childNodes&&a.childNodes.length&&e(a.childNodes)}))};return a(e),t};if(t.childNodes&&t.childNodes.length){var l=o(t.childNodes);l.forEach((function(e){var t=i.treeExpandedKeys.indexOf(e);t>-1&&i.treeExpandedKeys.splice(t,1)}))}},getBreadcrumbList:function(e){var t=[],a=function e(a){if(a.level>0)return t.push(a.data.name),e(a.parent)};return a(e),t.reverse()}},watch:{searchValue:function(e){this.$refs.treeData.filter(e)}}},T=k,$=(a("dda9"),Object(h["a"])(T,i,n,!1,null,"8dcf8a16",null));t["default"]=$.exports},"74f4":function(e,t,a){"use strict";var i=a("c539"),n=a.n(i);n.a},"7a1b":function(e,t,a){"use strict";var i=a("46e9"),n=a.n(i);n.a},"7a56a":function(e,t,a){},"816a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dev main-container"},[a("router-view")],1)},n=[],o={name:"dev",data:function(){return{}}},l=o,c=a("2877"),s=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=s.exports},8209:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-maintain"},[e._v("\n  "+e._s(this.$route.meta.title)+"\n")])},n=[],o={name:"data-maintain",data:function(){return{}}},l=o,c=(a("bca2"),a("2877")),s=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=s.exports},"82a3":function(e,t,a){"use strict";var i=a("ff33"),n=a.n(i);n.a},"90a5":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collect-list"},[a("div",{staticClass:"collect-list-serach"},[a("div",{staticClass:"search-left"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createDataSource}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.checkRadioData.id},on:{click:e.deleteList}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"search-right"},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"请输入线路名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.taskName,callback:function(t){e.taskName=t},expression:"taskName"}},[a("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.searchData},slot:"suffix"})])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"collect-list-content"},[a("Table",{ref:"collectlist",attrs:{tableData:e.collectList,selectRadio:!0,selectCheck:!1,colums:e.colums,isShowPagination:!1,total:e.total},on:{handleTable:e.handleTable,handleRadioChange:e.handleRadioChange},scopedSlots:e._u([{key:"dbName",fn:function(t){return[a("a",{staticStyle:{cursor:"pointer",color:"#3BA3F8"},on:{click:function(a){return e.showDatasource(t.obj.row)}}},[e._v(e._s(t.obj.row.dbName))])]}}])})],1),e._v(" "),e.collectList.length?a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.pageInfo.currentPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("Dialog",{attrs:{title:e.dialog1.title,dialogVisible:e.dialog1.visible,width:e.dialog1.width,isBtn:!1,handleClose:e.handleClose1},on:{openDialog:e.openDialog1}})],1)},n=[],o=(a("a481"),a("db72")),l=a("1419"),c=a("3f7a"),s=a("0748"),r={name:"collect-list",components:{NoData:l["a"],Dialog:c["a"],Table:s["a"]},data:function(){return{checkRadioData:{},colums:[{prop:"UUID",label:"ID"},{prop:"itemName",label:"采集项名称"},{prop:"devTypeName",label:"所属设备类型"}],operateOptions:[{label:"新增",type:"add"},{label:"删除",type:"del"}],loading:!1,dataSourceType:"",taskName:"",collectList:[],pageInfo:{currentPage:1,pageSize:12},total:0,dialog:{visible:!1,title:"",data:{}},dialog1:{visible:!1,title:"数据源详情",width:"50rem",data:{}}}},mounted:function(){this.searchData()},methods:{handleTable:function(e){var t=e.type,a=e.row;switch(t){case"execute":this.executeDataSource(a);break;case"edit":this.editColect(a);break;case"show":this.showDatasource(a);break}},handleTableCell:function(e){var t=e.a,a=e.b,i=e.c,n=e.d;console.log(11,t,a,i,n)},handleRadioChange:function(e){this.checkRadioData=e},executeDataSource:function(e){var t=this;this.$common.confirmMessage(this,"是否确认此操作",(function(){t.$http("metavalidateexec").get({ids:t.checkRadioData.id}).then((function(e){!0===e.data?t.$http("metaexec").get({collectId:t.checkRadioData.id}).then((function(e){t.$common.alertMessage(t,"success","执行成功",(function(){t.searchData()}))})):t.$common.alertMessage(t,"error","该数据源有其他采集任务正在执行！",(function(){}))}))}))},createDataSource:function(e){this.dialog={visible:!0,title:"新建采集任务",data:null}},getCollectData:function(){this.collectList=[{UUID:"ZT-001",itemName:"继电器",devTypeName:"类型1"},{UUID:"ZT-002",itemName:"继电器",devTypeName:"类型2"}]},searchData:function(){this.pageInfo.currentPage=1,this.getCollectData()},editColect:function(e){this.dialog={visible:!0,title:"编辑采集任务",data:e}},deleteList:function(){var e=this;this.$common.confirmMessage(this,"是否确认删除操作",(function(){e.$http("metadelete").post({ids:e.checkRadioData.id}).then((function(t){e.$common.alertMessage(e,"success","删除成功",(function(){e.searchData()}))}))}),(function(){}))},validateDatasource:function(){return this.$http("metavalidatedelete").get({id:this.checkRadioData.id})},handleCurrentChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageInfo.currentPage=e,this.getCollectData()},editCallback:function(e){var t=this;if(e){var a=Object(o["a"])({},e.id?{id:e.id}:{},{taskName:e.taskName,datasourceId:e.datasourceId,collectType:e.collectType}),i=Object(o["a"])({},e.cid?{id:e.cid}:{},{type:"3"});if("0"===e.collectType){if(i.collectType=e.collectType,i.rule=3,i.exeDate=JSON.stringify({minute:"0,10,20,30,40,50"}),i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}))}else if("1"===e.collectType)if("0"===e.cycleType)i.rule=4,i.exeDate=JSON.stringify({dateTime:this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime)});else if("1"===e.cycleType){if(i.rule=e.jobCron,i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}));switch(i.rule){case 0:i.exeDate=JSON.stringify(e.type0);break;case 1:i.exeDate=JSON.stringify(e.type1);break;case 2:i.exeDate=JSON.stringify(e.type2);break;case 3:i.exeDate=JSON.stringify(e.type3);break}}var n={meatadataCollectStr:JSON.stringify(a),dispatchStr:JSON.stringify(i)};this.$http("metasave").post(Object(o["a"])({},n)).then((function(e){t.$common.alertMessage(t,"success","保存成功！",(function(){})),t.searchData(),t.$refs.editCollect.resetData(),t.dialog={visible:!1,title:"",data:{}}}))}else this.$refs.editCollect.resetData(),this.dialog={visible:!1,title:"",data:{}}},pausePlay:function(e){var t=this;this.$common.confirmMessage(this,(function(){var a=1===e.status?"开始成功！":"暂停成功！",i=1===e.status?"collectPlay":"collectPause";t.$http.metaDataManage[i]({id:e.dispatchId}).then((function(e){t.$common.alertMessage(t,"success",a,(function(){t.searchData()}))}))}),(function(){}))},showDatasource:function(e){this.dialog1.visible=!0,this.dialog1.data=e},handleClose1:function(){this.dialog1.visible=!1,this.dialog1.data={}},openDialog1:function(){var e=this;this.$nextTick((function(){e.$refs.viewDatasource.init(e.dialog1.data)}))}}},d=r,u=(a("581c"),a("2877")),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},"94f3":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collect-list"},[a("div",{staticClass:"collect-list-serach"},[a("div",{staticClass:"search-left"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createDataSource}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.checkRadioData.id},on:{click:e.deleteList}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"search-right"},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"请输入线路名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.taskName,callback:function(t){e.taskName=t},expression:"taskName"}},[a("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.searchData},slot:"suffix"})])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"collect-list-content"},[a("Table",{ref:"collectlist",attrs:{tableData:e.collectList,selectRadio:!0,selectCheck:!1,colums:e.colums,isShowPagination:!1,total:e.total},on:{handleTable:e.handleTable,handleRadioChange:e.handleRadioChange},scopedSlots:e._u([{key:"dbName",fn:function(t){return[a("a",{staticStyle:{cursor:"pointer",color:"#3BA3F8"},on:{click:function(a){return e.showDatasource(t.obj.row)}}},[e._v(e._s(t.obj.row.dbName))])]}}])})],1),e._v(" "),e.collectList.length?a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.pageInfo.currentPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("Dialog",{attrs:{title:e.dialog1.title,dialogVisible:e.dialog1.visible,width:e.dialog1.width,isBtn:!1,handleClose:e.handleClose1},on:{openDialog:e.openDialog1}})],1)},n=[],o=(a("a481"),a("db72")),l=a("1419"),c=a("3f7a"),s=a("0748"),r={name:"collect-list",components:{NoData:l["a"],Dialog:c["a"],Table:s["a"]},data:function(){return{checkRadioData:{},colums:[{prop:"UUID",label:"线路ID"},{prop:"linename",label:"线路名称"}],operateOptions:[{label:"新增",type:"add"},{label:"删除",type:"del"}],loading:!1,dataSourceType:"",taskName:"",collectList:[],pageInfo:{currentPage:1,pageSize:12},total:0,dialog:{visible:!1,title:"",data:{}},dialog1:{visible:!1,title:"数据源详情",width:"50rem",data:{}}}},mounted:function(){this.searchData()},methods:{handleTable:function(e){var t=e.type,a=e.row;switch(t){case"execute":this.executeDataSource(a);break;case"edit":this.editColect(a);break;case"show":this.showDatasource(a);break}},handleTableCell:function(e){var t=e.a,a=e.b,i=e.c,n=e.d;console.log(11,t,a,i,n)},handleRadioChange:function(e){this.checkRadioData=e},executeDataSource:function(e){var t=this;this.$common.confirmMessage(this,"是否确认此操作",(function(){t.$http("metavalidateexec").get({ids:t.checkRadioData.id}).then((function(e){!0===e.data?t.$http("metaexec").get({collectId:t.checkRadioData.id}).then((function(e){t.$common.alertMessage(t,"success","执行成功",(function(){t.searchData()}))})):t.$common.alertMessage(t,"error","该数据源有其他采集任务正在执行！",(function(){}))}))}))},createDataSource:function(e){this.dialog={visible:!0,title:"新建采集任务",data:null}},getCollectData:function(){this.collectList=[{UUID:"JD-001",linename:"京哈线"},{UUID:"JD-002",linename:"京广线"}]},searchData:function(){this.pageInfo.currentPage=1,this.getCollectData()},editColect:function(e){this.dialog={visible:!0,title:"编辑采集任务",data:e}},deleteList:function(){var e=this;this.$common.confirmMessage(this,"是否确认删除操作",(function(){e.$http("metadelete").post({ids:e.checkRadioData.id}).then((function(t){e.$common.alertMessage(e,"success","删除成功",(function(){e.searchData()}))}))}),(function(){}))},validateDatasource:function(){return this.$http("metavalidatedelete").get({id:this.checkRadioData.id})},handleCurrentChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageInfo.currentPage=e,this.getCollectData()},editCallback:function(e){var t=this;if(e){var a=Object(o["a"])({},e.id?{id:e.id}:{},{taskName:e.taskName,datasourceId:e.datasourceId,collectType:e.collectType}),i=Object(o["a"])({},e.cid?{id:e.cid}:{},{type:"3"});if("0"===e.collectType){if(i.collectType=e.collectType,i.rule=3,i.exeDate=JSON.stringify({minute:"0,10,20,30,40,50"}),i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}))}else if("1"===e.collectType)if("0"===e.cycleType)i.rule=4,i.exeDate=JSON.stringify({dateTime:this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime)});else if("1"===e.cycleType){if(i.rule=e.jobCron,i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}));switch(i.rule){case 0:i.exeDate=JSON.stringify(e.type0);break;case 1:i.exeDate=JSON.stringify(e.type1);break;case 2:i.exeDate=JSON.stringify(e.type2);break;case 3:i.exeDate=JSON.stringify(e.type3);break}}var n={meatadataCollectStr:JSON.stringify(a),dispatchStr:JSON.stringify(i)};this.$http("metasave").post(Object(o["a"])({},n)).then((function(e){t.$common.alertMessage(t,"success","保存成功！",(function(){})),t.searchData(),t.$refs.editCollect.resetData(),t.dialog={visible:!1,title:"",data:{}}}))}else this.$refs.editCollect.resetData(),this.dialog={visible:!1,title:"",data:{}}},pausePlay:function(e){var t=this;this.$common.confirmMessage(this,(function(){var a=1===e.status?"开始成功！":"暂停成功！",i=1===e.status?"collectPlay":"collectPause";t.$http.metaDataManage[i]({id:e.dispatchId}).then((function(e){t.$common.alertMessage(t,"success",a,(function(){t.searchData()}))}))}),(function(){}))},showDatasource:function(e){this.dialog1.visible=!0,this.dialog1.data=e},handleClose1:function(){this.dialog1.visible=!1,this.dialog1.data={}},openDialog1:function(){var e=this;this.$nextTick((function(){e.$refs.viewDatasource.init(e.dialog1.data)}))}}},d=r,u=(a("82a3"),a("2877")),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},9783:function(e,t,a){},a594:function(e,t,a){"use strict";var i=a("5cca"),n=a.n(i);n.a},a8d4:function(e,t,a){"use strict";var i=a("08ca"),n=a.n(i);n.a},b5cd:function(e,t,a){},bca2:function(e,t,a){"use strict";var i=a("bef0"),n=a.n(i);n.a},bef0:function(e,t,a){},c36d:function(e,t,a){e.exports=a.p+"static/img/noDataPic.daba876c.png"},c49a:function(e,t,a){},c539:function(e,t,a){},c96e:function(e,t,a){"use strict";var i=a("1a3f"),n=a.n(i);n.a},ce1d:function(e,t,a){"use strict";var i=a("0c1d"),n=a.n(i);n.a},d143:function(e,t,a){"use strict";var i=a("b5cd"),n=a.n(i);n.a},dafc:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collect-list"},[a("div",{staticClass:"collect-list-serach"},[a("div",{staticClass:"search-left"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createDataSource}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.checkRadioData.id},on:{click:e.deleteList}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"search-right"},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"请输入线路名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.taskName,callback:function(t){e.taskName=t},expression:"taskName"}},[a("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.searchData},slot:"suffix"})])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"collect-list-content"},[a("Table",{ref:"collectlist",attrs:{tableData:e.collectList,selectRadio:!0,selectCheck:!1,colums:e.colums,isShowPagination:!1,total:e.total},on:{handleTable:e.handleTable,handleRadioChange:e.handleRadioChange},scopedSlots:e._u([{key:"dbName",fn:function(t){return[a("a",{staticStyle:{cursor:"pointer",color:"#3BA3F8"},on:{click:function(a){return e.showDatasource(t.obj.row)}}},[e._v(e._s(t.obj.row.dbName))])]}}])})],1),e._v(" "),e.collectList.length?a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.pageInfo.currentPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("Dialog",{attrs:{title:e.dialog1.title,dialogVisible:e.dialog1.visible,width:e.dialog1.width,isBtn:!1,handleClose:e.handleClose1},on:{openDialog:e.openDialog1}})],1)},n=[],o=(a("a481"),a("db72")),l=a("1419"),c=a("3f7a"),s=a("0748"),r={name:"collect-list",components:{NoData:l["a"],Dialog:c["a"],Table:s["a"]},data:function(){return{checkRadioData:{},colums:[{prop:"UUID",label:"ID"},{prop:"itemName",label:"采集项名称"},{prop:"devTypeName",label:"所属设备类型"}],operateOptions:[{label:"新增",type:"add"},{label:"删除",type:"del"}],loading:!1,dataSourceType:"",taskName:"",collectList:[],pageInfo:{currentPage:1,pageSize:12},total:0,dialog:{visible:!1,title:"",data:{}},dialog1:{visible:!1,title:"数据源详情",width:"50rem",data:{}}}},mounted:function(){this.searchData()},methods:{handleTable:function(e){var t=e.type,a=e.row;switch(t){case"execute":this.executeDataSource(a);break;case"edit":this.editColect(a);break;case"show":this.showDatasource(a);break}},handleTableCell:function(e){var t=e.a,a=e.b,i=e.c,n=e.d;console.log(11,t,a,i,n)},handleRadioChange:function(e){this.checkRadioData=e},executeDataSource:function(e){var t=this;this.$common.confirmMessage(this,"是否确认此操作",(function(){t.$http("metavalidateexec").get({ids:t.checkRadioData.id}).then((function(e){!0===e.data?t.$http("metaexec").get({collectId:t.checkRadioData.id}).then((function(e){t.$common.alertMessage(t,"success","执行成功",(function(){t.searchData()}))})):t.$common.alertMessage(t,"error","该数据源有其他采集任务正在执行！",(function(){}))}))}))},createDataSource:function(e){this.dialog={visible:!0,title:"新建采集任务",data:null}},getCollectData:function(){this.collectList=[{UUID:"MN-001",itemName:"电压",devTypeName:"类型1"},{UUID:"MN-002",itemName:"电压",devTypeName:"类型2"}]},searchData:function(){this.pageInfo.currentPage=1,this.getCollectData()},editColect:function(e){this.dialog={visible:!0,title:"编辑采集任务",data:e}},deleteList:function(){var e=this;this.$common.confirmMessage(this,"是否确认删除操作",(function(){e.$http("metadelete").post({ids:e.checkRadioData.id}).then((function(t){e.$common.alertMessage(e,"success","删除成功",(function(){e.searchData()}))}))}),(function(){}))},validateDatasource:function(){return this.$http("metavalidatedelete").get({id:this.checkRadioData.id})},handleCurrentChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageInfo.currentPage=e,this.getCollectData()},editCallback:function(e){var t=this;if(e){var a=Object(o["a"])({},e.id?{id:e.id}:{},{taskName:e.taskName,datasourceId:e.datasourceId,collectType:e.collectType}),i=Object(o["a"])({},e.cid?{id:e.cid}:{},{type:"3"});if("0"===e.collectType){if(i.collectType=e.collectType,i.rule=3,i.exeDate=JSON.stringify({minute:"0,10,20,30,40,50"}),i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}))}else if("1"===e.collectType)if("0"===e.cycleType)i.rule=4,i.exeDate=JSON.stringify({dateTime:this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime)});else if("1"===e.cycleType){if(i.rule=e.jobCron,i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}));switch(i.rule){case 0:i.exeDate=JSON.stringify(e.type0);break;case 1:i.exeDate=JSON.stringify(e.type1);break;case 2:i.exeDate=JSON.stringify(e.type2);break;case 3:i.exeDate=JSON.stringify(e.type3);break}}var n={meatadataCollectStr:JSON.stringify(a),dispatchStr:JSON.stringify(i)};this.$http("metasave").post(Object(o["a"])({},n)).then((function(e){t.$common.alertMessage(t,"success","保存成功！",(function(){})),t.searchData(),t.$refs.editCollect.resetData(),t.dialog={visible:!1,title:"",data:{}}}))}else this.$refs.editCollect.resetData(),this.dialog={visible:!1,title:"",data:{}}},pausePlay:function(e){var t=this;this.$common.confirmMessage(this,(function(){var a=1===e.status?"开始成功！":"暂停成功！",i=1===e.status?"collectPlay":"collectPause";t.$http.metaDataManage[i]({id:e.dispatchId}).then((function(e){t.$common.alertMessage(t,"success",a,(function(){t.searchData()}))}))}),(function(){}))},showDatasource:function(e){this.dialog1.visible=!0,this.dialog1.data=e},handleClose1:function(){this.dialog1.visible=!1,this.dialog1.data={}},openDialog1:function(){var e=this;this.$nextTick((function(){e.$refs.viewDatasource.init(e.dialog1.data)}))}}},d=r,u=(a("fc42"),a("2877")),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},dda9:function(e,t,a){"use strict";var i=a("fff3"),n=a.n(i);n.a},dea0:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collect-list"},[a("div",{staticClass:"collect-list-serach"},[a("div",{staticClass:"search-left"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createDataSource}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.checkRadioData.id},on:{click:e.deleteList}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"search-right"},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"请输入车站名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.taskName,callback:function(t){e.taskName=t},expression:"taskName"}},[a("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.searchData},slot:"suffix"})])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"collect-list-content"},[a("Table",{ref:"collectlist",attrs:{tableData:e.collectList,selectRadio:!0,selectCheck:!1,colums:e.colums,isShowPagination:!1,total:e.total},on:{handleTable:e.handleTable,handleRadioChange:e.handleRadioChange},scopedSlots:e._u([{key:"dbName",fn:function(t){return[a("a",{staticStyle:{cursor:"pointer",color:"#3BA3F8"},on:{click:function(a){return e.showDatasource(t.obj.row)}}},[e._v(e._s(t.obj.row.dbName))])]}}])})],1),e._v(" "),e.collectList.length?a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.pageInfo.currentPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("Dialog",{attrs:{title:e.dialog1.title,dialogVisible:e.dialog1.visible,width:e.dialog1.width,isBtn:!1,handleClose:e.handleClose1},on:{openDialog:e.openDialog1}})],1)},n=[],o=(a("a481"),a("db72")),l=a("1419"),c=a("3f7a"),s=a("0748"),r={name:"collect-list",components:{NoData:l["a"],Dialog:c["a"],Table:s["a"]},data:function(){return{checkRadioData:{},colums:[{prop:"UUID",label:"线路ID"},{prop:"stationName",label:"车站名称"},{prop:"linename",label:"线路名称"}],operateOptions:[{label:"新增",type:"add"},{label:"删除",type:"del"}],loading:!1,dataSourceType:"",taskName:"",collectList:[],pageInfo:{currentPage:1,pageSize:12},total:0,dialog:{visible:!1,title:"",data:{}},dialog1:{visible:!1,title:"数据源详情",width:"50rem",data:{}}}},mounted:function(){this.searchData()},methods:{handleTable:function(e){var t=e.type,a=e.row;switch(t){case"execute":this.executeDataSource(a);break;case"edit":this.editColect(a);break;case"show":this.showDatasource(a);break}},handleTableCell:function(e){var t=e.a,a=e.b,i=e.c,n=e.d;console.log(11,t,a,i,n)},handleRadioChange:function(e){this.checkRadioData=e},executeDataSource:function(e){var t=this;this.$common.confirmMessage(this,"是否确认此操作",(function(){t.$http("metavalidateexec").get({ids:t.checkRadioData.id}).then((function(e){!0===e.data?t.$http("metaexec").get({collectId:t.checkRadioData.id}).then((function(e){t.$common.alertMessage(t,"success","执行成功",(function(){t.searchData()}))})):t.$common.alertMessage(t,"error","该数据源有其他采集任务正在执行！",(function(){}))}))}))},createDataSource:function(e){this.dialog={visible:!0,title:"新建采集任务",data:null}},getCollectData:function(){this.collectList=[{UUID:"JD-001",linename:"京哈线",stationName:"北京南站"},{UUID:"JD-002",linename:"京广线",stationName:"广州南站"}]},searchData:function(){this.pageInfo.currentPage=1,this.getCollectData()},editColect:function(e){this.dialog={visible:!0,title:"编辑采集任务",data:e}},deleteList:function(){var e=this;this.$common.confirmMessage(this,"是否确认删除操作",(function(){e.$http("metadelete").post({ids:e.checkRadioData.id}).then((function(t){e.$common.alertMessage(e,"success","删除成功",(function(){e.searchData()}))}))}),(function(){}))},validateDatasource:function(){return this.$http("metavalidatedelete").get({id:this.checkRadioData.id})},handleCurrentChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageInfo.currentPage=e,this.getCollectData()},editCallback:function(e){var t=this;if(e){var a=Object(o["a"])({},e.id?{id:e.id}:{},{taskName:e.taskName,datasourceId:e.datasourceId,collectType:e.collectType}),i=Object(o["a"])({},e.cid?{id:e.cid}:{},{type:"3"});if("0"===e.collectType){if(i.collectType=e.collectType,i.rule=3,i.exeDate=JSON.stringify({minute:"0,10,20,30,40,50"}),i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}))}else if("1"===e.collectType)if("0"===e.cycleType)i.rule=4,i.exeDate=JSON.stringify({dateTime:this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime)});else if("1"===e.cycleType){if(i.rule=e.jobCron,i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}));switch(i.rule){case 0:i.exeDate=JSON.stringify(e.type0);break;case 1:i.exeDate=JSON.stringify(e.type1);break;case 2:i.exeDate=JSON.stringify(e.type2);break;case 3:i.exeDate=JSON.stringify(e.type3);break}}var n={meatadataCollectStr:JSON.stringify(a),dispatchStr:JSON.stringify(i)};this.$http("metasave").post(Object(o["a"])({},n)).then((function(e){t.$common.alertMessage(t,"success","保存成功！",(function(){})),t.searchData(),t.$refs.editCollect.resetData(),t.dialog={visible:!1,title:"",data:{}}}))}else this.$refs.editCollect.resetData(),this.dialog={visible:!1,title:"",data:{}}},pausePlay:function(e){var t=this;this.$common.confirmMessage(this,(function(){var a=1===e.status?"开始成功！":"暂停成功！",i=1===e.status?"collectPlay":"collectPause";t.$http.metaDataManage[i]({id:e.dispatchId}).then((function(e){t.$common.alertMessage(t,"success",a,(function(){t.searchData()}))}))}),(function(){}))},showDatasource:function(e){this.dialog1.visible=!0,this.dialog1.data=e},handleClose1:function(){this.dialog1.visible=!1,this.dialog1.data={}},openDialog1:function(){var e=this;this.$nextTick((function(){e.$refs.viewDatasource.init(e.dialog1.data)}))}}},d=r,u=(a("205a"),a("2877")),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},eaea5:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collect-list"},[a("div",{staticClass:"collect-list-serach"},[a("div",{staticClass:"search-left"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createDataSource}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.checkRadioData.id},on:{click:e.deleteList}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"search-right"},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"请输入车辆名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.taskName,callback:function(t){e.taskName=t},expression:"taskName"}},[a("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.searchData},slot:"suffix"})])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"collect-list-content"},[a("Table",{ref:"collectlist",attrs:{tableData:e.collectList,selectRadio:!0,selectCheck:!1,colums:e.colums,isShowPagination:!1,total:e.total},on:{handleTable:e.handleTable,handleRadioChange:e.handleRadioChange},scopedSlots:e._u([{key:"dbName",fn:function(t){return[a("a",{staticStyle:{cursor:"pointer",color:"#3BA3F8"},on:{click:function(a){return e.showDatasource(t.obj.row)}}},[e._v(e._s(t.obj.row.dbName))])]}}])})],1),e._v(" "),e.collectList.length?a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.pageInfo.currentPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("Dialog",{attrs:{title:e.dialog1.title,dialogVisible:e.dialog1.visible,width:e.dialog1.width,isBtn:!1,handleClose:e.handleClose1},on:{openDialog:e.openDialog1}})],1)},n=[],o=(a("a481"),a("db72")),l=a("1419"),c=a("3f7a"),s=a("0748"),r={name:"collect-list",components:{NoData:l["a"],Dialog:c["a"],Table:s["a"]},data:function(){return{checkRadioData:{},colums:[{prop:"UUID",label:"线路ID"},{prop:"trainName",label:"车辆名称"},{prop:"linename",label:"线路名称"}],operateOptions:[{label:"新增",type:"add"},{label:"删除",type:"del"}],loading:!1,dataSourceType:"",taskName:"",collectList:[],pageInfo:{currentPage:1,pageSize:12},total:0,dialog:{visible:!1,title:"",data:{}},dialog1:{visible:!1,title:"数据源详情",width:"50rem",data:{}}}},mounted:function(){this.searchData()},methods:{handleTable:function(e){var t=e.type,a=e.row;switch(t){case"execute":this.executeDataSource(a);break;case"edit":this.editColect(a);break;case"show":this.showDatasource(a);break}},handleTableCell:function(e){var t=e.a,a=e.b,i=e.c,n=e.d;console.log(11,t,a,i,n)},handleRadioChange:function(e){this.checkRadioData=e},executeDataSource:function(e){var t=this;this.$common.confirmMessage(this,"是否确认此操作",(function(){t.$http("metavalidateexec").get({ids:t.checkRadioData.id}).then((function(e){!0===e.data?t.$http("metaexec").get({collectId:t.checkRadioData.id}).then((function(e){t.$common.alertMessage(t,"success","执行成功",(function(){t.searchData()}))})):t.$common.alertMessage(t,"error","该数据源有其他采集任务正在执行！",(function(){}))}))}))},createDataSource:function(e){this.dialog={visible:!0,title:"新建采集任务",data:null}},getCollectData:function(){this.collectList=[{UUID:"JD-001",linename:"京哈线",trainName:"复兴号FX-001"},{UUID:"JD-002",linename:"京广线",trainName:"复兴号FX-002"}]},searchData:function(){this.pageInfo.currentPage=1,this.getCollectData()},editColect:function(e){this.dialog={visible:!0,title:"编辑采集任务",data:e}},deleteList:function(){var e=this;this.$common.confirmMessage(this,"是否确认删除操作",(function(){e.$http("metadelete").post({ids:e.checkRadioData.id}).then((function(t){e.$common.alertMessage(e,"success","删除成功",(function(){e.searchData()}))}))}),(function(){}))},validateDatasource:function(){return this.$http("metavalidatedelete").get({id:this.checkRadioData.id})},handleCurrentChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageInfo.currentPage=e,this.getCollectData()},editCallback:function(e){var t=this;if(e){var a=Object(o["a"])({},e.id?{id:e.id}:{},{taskName:e.taskName,datasourceId:e.datasourceId,collectType:e.collectType}),i=Object(o["a"])({},e.cid?{id:e.cid}:{},{type:"3"});if("0"===e.collectType){if(i.collectType=e.collectType,i.rule=3,i.exeDate=JSON.stringify({minute:"0,10,20,30,40,50"}),i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}))}else if("1"===e.collectType)if("0"===e.cycleType)i.rule=4,i.exeDate=JSON.stringify({dateTime:this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime)});else if("1"===e.cycleType){if(i.rule=e.jobCron,i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}));switch(i.rule){case 0:i.exeDate=JSON.stringify(e.type0);break;case 1:i.exeDate=JSON.stringify(e.type1);break;case 2:i.exeDate=JSON.stringify(e.type2);break;case 3:i.exeDate=JSON.stringify(e.type3);break}}var n={meatadataCollectStr:JSON.stringify(a),dispatchStr:JSON.stringify(i)};this.$http("metasave").post(Object(o["a"])({},n)).then((function(e){t.$common.alertMessage(t,"success","保存成功！",(function(){})),t.searchData(),t.$refs.editCollect.resetData(),t.dialog={visible:!1,title:"",data:{}}}))}else this.$refs.editCollect.resetData(),this.dialog={visible:!1,title:"",data:{}}},pausePlay:function(e){var t=this;this.$common.confirmMessage(this,(function(){var a=1===e.status?"开始成功！":"暂停成功！",i=1===e.status?"collectPlay":"collectPause";t.$http.metaDataManage[i]({id:e.dispatchId}).then((function(e){t.$common.alertMessage(t,"success",a,(function(){t.searchData()}))}))}),(function(){}))},showDatasource:function(e){this.dialog1.visible=!0,this.dialog1.data=e},handleClose1:function(){this.dialog1.visible=!1,this.dialog1.data={}},openDialog1:function(){var e=this;this.$nextTick((function(){e.$refs.viewDatasource.init(e.dialog1.data)}))}}},d=r,u=(a("a8d4"),a("2877")),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},eafa:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collect-list"},[a("div",{staticClass:"collect-list-serach"},[a("div",{staticClass:"search-left"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createDataSource}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.checkRadioData.id},on:{click:e.deleteList}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"search-right"},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"请输入设备类型名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.taskName,callback:function(t){e.taskName=t},expression:"taskName"}},[a("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.searchData},slot:"suffix"})])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"collect-list-content"},[a("Table",{ref:"collectlist",attrs:{tableData:e.collectList,selectRadio:!0,selectCheck:!1,colums:e.colums,isShowPagination:!1,total:e.total},on:{handleTable:e.handleTable,handleRadioChange:e.handleRadioChange},scopedSlots:e._u([{key:"dbName",fn:function(t){return[a("a",{staticStyle:{cursor:"pointer",color:"#3BA3F8"},on:{click:function(a){return e.showDatasource(t.obj.row)}}},[e._v(e._s(t.obj.row.dbName))])]}}])})],1),e._v(" "),e.collectList.length?a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.pageInfo.currentPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("Dialog",{attrs:{title:e.dialog1.title,dialogVisible:e.dialog1.visible,width:e.dialog1.width,isBtn:!1,handleClose:e.handleClose1},on:{openDialog:e.openDialog1}})],1)},n=[],o=(a("a481"),a("db72")),l=a("1419"),c=a("3f7a"),s=a("0748"),r={name:"collect-list",components:{NoData:l["a"],Dialog:c["a"],Table:s["a"]},data:function(){return{checkRadioData:{},colums:[{prop:"UUID",label:"设备类型ID"},{prop:"profession",label:"所属专业"},{prop:"level",label:"级别"},{prop:"devTypeName",label:"设备类型名"}],operateOptions:[{label:"新增",type:"add"},{label:"删除",type:"del"}],loading:!1,dataSourceType:"",taskName:"",collectList:[],pageInfo:{currentPage:1,pageSize:12},total:0,dialog:{visible:!1,title:"",data:{}},dialog1:{visible:!1,title:"数据源详情",width:"50rem",data:{}}}},mounted:function(){this.searchData()},methods:{handleTable:function(e){var t=e.type,a=e.row;switch(t){case"execute":this.executeDataSource(a);break;case"edit":this.editColect(a);break;case"show":this.showDatasource(a);break}},handleTableCell:function(e){var t=e.a,a=e.b,i=e.c,n=e.d;console.log(11,t,a,i,n)},handleRadioChange:function(e){this.checkRadioData=e},executeDataSource:function(e){var t=this;this.$common.confirmMessage(this,"是否确认此操作",(function(){t.$http("metavalidateexec").get({ids:t.checkRadioData.id}).then((function(e){!0===e.data?t.$http("metaexec").get({collectId:t.checkRadioData.id}).then((function(e){t.$common.alertMessage(t,"success","执行成功",(function(){t.searchData()}))})):t.$common.alertMessage(t,"error","该数据源有其他采集任务正在执行！",(function(){}))}))}))},createDataSource:function(e){this.dialog={visible:!0,title:"新建采集任务",data:null}},getCollectData:function(){this.collectList=[{UUID:"TY-001",profession:"信号",level:"2",devTypeName:"类型1"},{UUID:"TY-002",profession:"车辆",level:"3",linename:"京广线",devTypeName:"类型2"}]},searchData:function(){this.pageInfo.currentPage=1,this.getCollectData()},editColect:function(e){this.dialog={visible:!0,title:"编辑采集任务",data:e}},deleteList:function(){var e=this;this.$common.confirmMessage(this,"是否确认删除操作",(function(){e.$http("metadelete").post({ids:e.checkRadioData.id}).then((function(t){e.$common.alertMessage(e,"success","删除成功",(function(){e.searchData()}))}))}),(function(){}))},validateDatasource:function(){return this.$http("metavalidatedelete").get({id:this.checkRadioData.id})},handleCurrentChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageInfo.currentPage=e,this.getCollectData()},editCallback:function(e){var t=this;if(e){var a=Object(o["a"])({},e.id?{id:e.id}:{},{taskName:e.taskName,datasourceId:e.datasourceId,collectType:e.collectType}),i=Object(o["a"])({},e.cid?{id:e.cid}:{},{type:"3"});if("0"===e.collectType){if(i.collectType=e.collectType,i.rule=3,i.exeDate=JSON.stringify({minute:"0,10,20,30,40,50"}),i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}))}else if("1"===e.collectType)if("0"===e.cycleType)i.rule=4,i.exeDate=JSON.stringify({dateTime:this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime)});else if("1"===e.cycleType){if(i.rule=e.jobCron,i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}));switch(i.rule){case 0:i.exeDate=JSON.stringify(e.type0);break;case 1:i.exeDate=JSON.stringify(e.type1);break;case 2:i.exeDate=JSON.stringify(e.type2);break;case 3:i.exeDate=JSON.stringify(e.type3);break}}var n={meatadataCollectStr:JSON.stringify(a),dispatchStr:JSON.stringify(i)};this.$http("metasave").post(Object(o["a"])({},n)).then((function(e){t.$common.alertMessage(t,"success","保存成功！",(function(){})),t.searchData(),t.$refs.editCollect.resetData(),t.dialog={visible:!1,title:"",data:{}}}))}else this.$refs.editCollect.resetData(),this.dialog={visible:!1,title:"",data:{}}},pausePlay:function(e){var t=this;this.$common.confirmMessage(this,(function(){var a=1===e.status?"开始成功！":"暂停成功！",i=1===e.status?"collectPlay":"collectPause";t.$http.metaDataManage[i]({id:e.dispatchId}).then((function(e){t.$common.alertMessage(t,"success",a,(function(){t.searchData()}))}))}),(function(){}))},showDatasource:function(e){this.dialog1.visible=!0,this.dialog1.data=e},handleClose1:function(){this.dialog1.visible=!1,this.dialog1.data={}},openDialog1:function(){var e=this;this.$nextTick((function(){e.$refs.viewDatasource.init(e.dialog1.data)}))}}},d=r,u=(a("5374"),a("2877")),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},ee8e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collect-list"},[a("div",{staticClass:"collect-list-serach"},[a("div",{staticClass:"search-left"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createDataSource}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.checkRadioData.id},on:{click:e.deleteList}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"search-right"},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"请输入机构名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.taskName,callback:function(t){e.taskName=t},expression:"taskName"}},[a("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.searchData},slot:"suffix"})])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"collect-list-content"},[a("Table",{ref:"collectlist",attrs:{tableData:e.collectList,selectRadio:!0,selectCheck:!1,colums:e.colums,isShowPagination:!1,total:e.total},on:{handleTable:e.handleTable,handleRadioChange:e.handleRadioChange},scopedSlots:e._u([{key:"dbName",fn:function(t){return[a("a",{staticStyle:{cursor:"pointer",color:"#3BA3F8"},on:{click:function(a){return e.showDatasource(t.obj.row)}}},[e._v(e._s(t.obj.row.dbName))])]}}])})],1),e._v(" "),e.collectList.length?a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.pageInfo.currentPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("Dialog",{attrs:{title:e.dialog1.title,dialogVisible:e.dialog1.visible,width:e.dialog1.width,isBtn:!1,handleClose:e.handleClose1},on:{openDialog:e.openDialog1}})],1)},n=[],o=(a("a481"),a("db72")),l=a("1419"),c=a("3f7a"),s=a("0748"),r={name:"collect-list",components:{NoData:l["a"],Dialog:c["a"],Table:s["a"]},data:function(){return{checkRadioData:{},colums:[{prop:"UUID",label:"机构ID"},{prop:"level",label:"级别"},{prop:"attrName",label:"属性名称"},{prop:"lineNmme",label:"机构名称"}],operateOptions:[{label:"新增",type:"add"},{label:"删除",type:"del"}],loading:!1,dataSourceType:"",taskName:"",collectList:[],pageInfo:{currentPage:1,pageSize:12},total:0,dialog:{visible:!1,title:"",data:{}},dialog1:{visible:!1,title:"数据源详情",width:"50rem",data:{}}}},mounted:function(){this.searchData()},methods:{handleTable:function(e){var t=e.type,a=e.row;switch(t){case"execute":this.executeDataSource(a);break;case"edit":this.editColect(a);break;case"show":this.showDatasource(a);break}},handleTableCell:function(e){var t=e.a,a=e.b,i=e.c,n=e.d;console.log(11,t,a,i,n)},handleRadioChange:function(e){this.checkRadioData=e},executeDataSource:function(e){var t=this;this.$common.confirmMessage(this,"是否确认此操作",(function(){t.$http("metavalidateexec").get({ids:t.checkRadioData.id}).then((function(e){!0===e.data?t.$http("metaexec").get({collectId:t.checkRadioData.id}).then((function(e){t.$common.alertMessage(t,"success","执行成功",(function(){t.searchData()}))})):t.$common.alertMessage(t,"error","该数据源有其他采集任务正在执行！",(function(){}))}))}))},createDataSource:function(e){this.dialog={visible:!0,title:"新建采集任务",data:null}},getCollectData:function(){this.collectList=[{UUID:"JG-001",level:"3",attrName:"属性1",orgName:"机构1"},{UUID:"G-001",level:"4",attrName:"属性1",orgName:"机构1"}]},searchData:function(){this.pageInfo.currentPage=1,this.getCollectData()},editColect:function(e){this.dialog={visible:!0,title:"编辑采集任务",data:e}},deleteList:function(){var e=this;this.$common.confirmMessage(this,"是否确认删除操作",(function(){e.$http("metadelete").post({ids:e.checkRadioData.id}).then((function(t){e.$common.alertMessage(e,"success","删除成功",(function(){e.searchData()}))}))}),(function(){}))},validateDatasource:function(){return this.$http("metavalidatedelete").get({id:this.checkRadioData.id})},handleCurrentChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageInfo.currentPage=e,this.getCollectData()},editCallback:function(e){var t=this;if(e){var a=Object(o["a"])({},e.id?{id:e.id}:{},{taskName:e.taskName,datasourceId:e.datasourceId,collectType:e.collectType}),i=Object(o["a"])({},e.cid?{id:e.cid}:{},{type:"3"});if("0"===e.collectType){if(i.collectType=e.collectType,i.rule=3,i.exeDate=JSON.stringify({minute:"0,10,20,30,40,50"}),i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}))}else if("1"===e.collectType)if("0"===e.cycleType)i.rule=4,i.exeDate=JSON.stringify({dateTime:this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime)});else if("1"===e.cycleType){if(i.rule=e.jobCron,i.beginDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[0]),i.endDate=this.$common.changeUTCtoDateTime("yyyy-MM-dd HH:mm:ss",e.effectTime[1]).replace("00:00:00","23:59:59"),+new Date>+new Date(i.endDate))return this.$common.alertMessage(this,"error","当前调度结束时间必须大于当前时间！",(function(){}));switch(i.rule){case 0:i.exeDate=JSON.stringify(e.type0);break;case 1:i.exeDate=JSON.stringify(e.type1);break;case 2:i.exeDate=JSON.stringify(e.type2);break;case 3:i.exeDate=JSON.stringify(e.type3);break}}var n={meatadataCollectStr:JSON.stringify(a),dispatchStr:JSON.stringify(i)};this.$http("metasave").post(Object(o["a"])({},n)).then((function(e){t.$common.alertMessage(t,"success","保存成功！",(function(){})),t.searchData(),t.$refs.editCollect.resetData(),t.dialog={visible:!1,title:"",data:{}}}))}else this.$refs.editCollect.resetData(),this.dialog={visible:!1,title:"",data:{}}},pausePlay:function(e){var t=this;this.$common.confirmMessage(this,(function(){var a=1===e.status?"开始成功！":"暂停成功！",i=1===e.status?"collectPlay":"collectPause";t.$http.metaDataManage[i]({id:e.dispatchId}).then((function(e){t.$common.alertMessage(t,"success",a,(function(){t.searchData()}))}))}),(function(){}))},showDatasource:function(e){this.dialog1.visible=!0,this.dialog1.data=e},handleClose1:function(){this.dialog1.visible=!1,this.dialog1.data={}},openDialog1:function(){var e=this;this.$nextTick((function(){e.$refs.viewDatasource.init(e.dialog1.data)}))}}},d=r,u=(a("a594"),a("2877")),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},f53e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"org main-container"},[a("router-view")],1)},n=[],o={name:"org",data:function(){return{}}},l=o,c=a("2877"),s=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=s.exports},f5ca:function(e,t,a){},f9cd:function(e,t,a){},fc42:function(e,t,a){"use strict";var i=a("f9cd"),n=a.n(i);n.a},fc820:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"line-manage main-container"},[a("router-view")],1)},n=[],o={name:"line-manage",data:function(){return{}}},l=o,c=a("2877"),s=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=s.exports},ff33:function(e,t,a){},ff7f:function(e,t,a){},fff3:function(e,t,a){}}]);